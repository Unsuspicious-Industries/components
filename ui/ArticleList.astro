---

export interface Article {
  title: string;
  description: string;
  preprintLink: string;
}

export interface ArticleListProps {
  articles: Article[];
  classes?: {
    container?: string;
    article?: string;
    title?: string;
    description?: string;
    preprintLink?: string;
  };
}

const { articles, classes = {} } = Astro.props as ArticleListProps;

const preprintLogos = {
  arxiv: '~/assets/images/arxiv-logo.png', // Replace with the actual path to the arXiv logo
  engrxiv: '~/assets/images/engrxiv-logo.png', // Replace with the actual path to the engrXiv logo
};

function getPreprintType(url: string): 'arxiv' | 'engrxiv' | null {
  if (url.includes('arxiv')) return 'arxiv';
  if (url.includes('engrxiv')) return 'engrxiv';
  return null;
}
---

<div class={classes.container}>
  {articles.map((article) => {
    const preprintType = getPreprintType(article.preprintLink);
    return (
      <div class={`border-l-4 border-primary pl-4 ${classes.article}`}>
        <h3 class={classes.title}>{article.title}</h3>
        <div class="flex justify-between items-center">
          <p class={classes.description}>{article.description}</p>
          <div class="flex items-center ml-4">
            {preprintType ? (
              <>
                <a href={article.preprintLink} class={`text-accent underline ${classes.preprintLink}`} target="_blank" rel="noopener noreferrer">
                  <img src={preprintLogos[preprintType]} alt={`${preprintType} logo`} class="w-6 h-6 mr-2" />
                </a>
              </>
            ) : (
              <a href={article.preprintLink} class="text-accent underline">Link</a>
            )}
          </div>
        </div>
      </div>
    );
  })}
</div>